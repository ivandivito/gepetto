
.CSEG

CONSTANT_DEBUG_LCD:			.DB "DEBUG           ", 0
CONSTANT_DEBUG_USB:			.DB "DEBUG", '\n', 0

DEBUG_LCD:
	PUSH R10
	PUSH R16
	PUSH R17
	PUSH R18
	PUSH ZL
	PUSH ZH

	IN R10, SREG
	
	LDI ZL, LOW(CONSTANT_DEBUG_LCD<<1)
	LDI ZH, HIGH(CONSTANT_DEBUG_LCD<<1)
	CALL UI_WRITE_FIRST_LINE_P_STRING

	OUT SREG, R10

	POP ZH
	POP ZL
	POP R18
	POP R17
	POP R16
	POP R10
	RET


DEBUG_USB:
	PUSH R10
	PUSH R16
	PUSH R17
	PUSH ZL
	PUSH ZH

	IN R10, SREG
	
	LDI ZL, LOW(CONSTANT_DEBUG_USB<<1)
	LDI ZH, HIGH(CONSTANT_DEBUG_USB<<1)
	CALL USB_SEND_P_LINE

	OUT SREG, R10

	POP ZH
	POP ZL
	POP R17
	POP R16
	POP R10

	RET


DEBUG_USB_CHAR:
	PUSH R10
	PUSH R16
	PUSH R17

	IN R10, SREG
	
	CALL USB_SEND_CHAR

	LDI R16, '\n'
	CALL USB_SEND_CHAR

	OUT SREG, R10

	POP R17
	POP R16
	POP R10

	RET


DEBUG_GRBL:
	PUSH R10
	PUSH R16
	PUSH R17
	PUSH ZL
	PUSH ZH

	IN R10, SREG
	
	LDI ZL, LOW(CONSTANT_DEBUG_USB<<1)
	LDI ZH, HIGH(CONSTANT_DEBUG_USB<<1)
	CALL GRBL_SEND_P_LINE

	OUT SREG, R10

	POP ZH
	POP ZL
	POP R17
	POP R16
	POP R10

	RET

